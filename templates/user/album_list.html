{% extends "base.html" %}

{% block content %}
<div class="container mt-3">
    <a href="{% url 'user:my_user_profile' profile_user.id %}" class="btn btn-secondary mb-3">Back to Profile</a>
    <h1>Albums of {{ profile_user.username }}</h1>
    {% if is_owner %}
        <a href="{% url 'user:create_album' profile_user.id %}" class="btn btn-primary mb-3">Create New Album</a>
    {% endif %}

    <div class="row">
        {% for album in albums %}
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">
                        <a href="{% url 'user:photo_list' profile_user.id album.id %}">{{ album.title }}</a>
                    </h5>
                    <p class="card-text">{{ album.description }}</p>
                    <p><small>Created on {{ album.created_at|date:"Y-m-d" }}</small></p>
                </div>
                <div class="card-body">
                    {% for photo in album.photos.all|slice:":4" %} <!-- Display up to 4 photo thumbnails -->
                    <img src="{{ photo.image.url }}" alt="{{ photo.description }}" class="img-thumbnail" style="width: 50px; height: auto;">
                    {% empty %}
                    <p>No photos available.</p>
                    {% endfor %}
                </div>
                {% if is_owner %}
                    <a href="{% url 'user:edit_album' profile_user.id album.id %}" class="btn btn-info">Edit</a>
                    <a href="{% url 'user:delete_album' profile_user.id album.id %}" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this album?');">Delete Album</a>
                {% endif %}
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <p>No albums found.</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}